(function() {
    let template = document.createElement("template");
    template.innerHTML = `<form id="form"><table><tr><td><input id="sps_showGroupHeader" type="checkbox" checked> Show Group Header in Sub-Menu</td></tr><tr></tr><tr><td><div><b>Define Colors:</b></div><div>Menu-bar background: <input id="sps_menuBackgroundColor" type="color" value="#cccccc"><br/>Menu-bar font: <input id="sps_menuFontColor" type="color" value="#4b4b4b"></div></td></tr></table><input type="submit" style="display:none;"></form><style>input[type="color"]{width:25px;height:25px;padding:0px;border:none;background-color:transparent;}</style>`;
    class MENU_Sps extends HTMLElement {
        constructor() {
            super();
            this._shadowRoot = this.attachShadow({
                mode: "open"
            });
            this._shadowRoot.appendChild(template.content.cloneNode(true));  
            this._shadowRoot.getElementById("form").addEventListener("submit", this._submit.bind(this));
            this._shadowRoot.getElementById("sps_showGroupHeader").addEventListener("change", this._formSubmit.bind(this));
            this._shadowRoot.getElementById("sps_menuBackgroundColor").addEventListener("change", this._formSubmit.bind(this));
            this._shadowRoot.getElementById("sps_menuFontColor").addEventListener("change", this._formSubmit.bind(this));
        }       
        _formSubmit(e) {
            e.preventDefault();
            this._shadowRoot.getElementById("form").dispatchEvent(new Event('submit'));
        }
        _submit(e) {
            e.preventDefault();
            this.dispatchEvent(new CustomEvent("propertiesChanged", {
                detail: {
                    properties: {
                    	showGroupHeader: this.showGroupHeader,
                        menuBackgroundColor: this.menuBackgroundColor,
                        menuFontColor: this.menuFontColor
                    }
                }
            }));
        }
        set menuBackgroundColor(newColor) {
            this._shadowRoot.getElementById("sps_menuBackgroundColor").value = newColor;
        }
        get menuBackgroundColor() {
            return this._shadowRoot.getElementById("sps_menuBackgroundColor").value;
        }
        set menuFontColor(newColor) {
            this._shadowRoot.getElementById("sps_menuFontColor").value = newColor;
        }
        get menuFontColor() {
            return this._shadowRoot.getElementById("sps_menuFontColor").value;
        }
        set showGroupHeader(flag) {
            this._shadowRoot.getElementById("sps_showGroupHeader").checked = flag;
        }
        get showGroupHeader() {
            return this._shadowRoot.getElementById("sps_showGroupHeader").checked;
        }
    }
    customElements.define("com-gmail-cse-ari007-menu-sps", MENU_Sps);
})(); 
   